{% extends "layout.html" %}
{% block content %}
<div class="app-wrapper">
    <div class="sidebar">
        <h2>Chat History</h2>
        <ul class="message-list">
            {% for msg in history %}
            <li class="{{ msg.role }}">
                <span class="role">{{ msg.role }}:</span> {{ msg.message }}
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="main-area">
        <div class="custom-prompt-section">
            <form id="custom-prompt-form" method="POST">
                <label for="custom_prompt">Customize Responses:</label>
                <textarea id="custom_prompt" name="custom_prompt" placeholder="e.g., Respond as a friendly math tutor">{{ custom_prompt }}</textarea>
                <button type="submit">Save Prompt</button>
            </form>
        </div>

        <div class="chat-container" id="chat-container">
            {% for msg in history %}
            <div class="message-row {{msg.role}}">
                <div class="message-content">
                    <strong>{{msg.role.capitalize()}}:</strong> {{ msg.message }}
                </div>
            </div>
            {% endfor %}
        </div>
        <form id="send-message-form">
            <input type="text" id="user-message" name="message" placeholder="Type your message..." autocomplete="off" />
            <button type="submit">Send</button>
        </form>
    </div>
</div>
{% endblock %}
